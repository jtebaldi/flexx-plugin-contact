<div class="page-content-wrap" id="contact_form_answers">
  <div class="row">
    <div class="col-md-12">
      <!-- START BASIC TABLE SAMPLE -->
      <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Responses</h3>
            <div class="box-tools pull-right">
              <a class="btn btn-box-action" href="<%= url_for action: :index %>"><%= t('.back_btn', default: 'Back') %></a>
            </div>
        </div>
        <div class="box-body custom-tabe-responsive">
          <table class="table">
            <thead>
            <tr>
            	<th scope="col"><%= t('.contact_name', default: 'Name') %></th>
            	<th scope="col"><%= t('.contact_email', default: 'Email') %></th>
              <th scope="col"><%= t('.campaign', default: 'Campaign') %></th>
              <th scope="col"><%= t('.created_at', default: 'Initial contact') %></th>
              <th scope="col"></th>
            </tr>
            </thead>
            <tbody id="contact_form_body">
            <% @forms.each do |form| %>
                <% value = (JSON.parse(form.settings).to_sym rescue form.value) %>
                <tr>
                	<td data-label=""><%= value[:fields][form.parent.fields.select{|f| f[:label].to_s.downcase == "name"}.first[:cid].to_sym] rescue '' %></td>
                	<td data-label=""><%= value[:fields][form.parent.fields.select{|f| f[:label].to_s.downcase == "email"}.first[:cid].to_sym] rescue '' %></td>
                  <td data-label=""><%= form.campaign.name rescue '' %></td>
                  <td data-label=""><%= value[:created_at] %></td>
                  <td data-label="">
                    <%= link_to "view", { action: :show, id: form.id }, class: "btn btn-info btn-xs" %>
                    <%= link_to raw('<span class="text-danger" style="color:#fff">Delete</span>'),
                                { action: :del_response, admin_form_id: form.parent.id, response_id: form.id },
                                method: :delete, data: { confirm: t('.actions.confirm_delete', default: 'Are you sure?') },
                                class: 'btn btn-danger btn-xs', title: t('.actions.delete', default: 'Delete') %>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
          <%= content_tag("div", raw("#{t('camaleon_cms.admin.message.data_found_list', default: 'No items found')}"), class: "alert alert-warning") if @forms.empty? %>
            <%= raw cama_do_pagination(@forms) %>
        </div>
        <script>
          $( document ).ready(function() {
            $("#contact_form_body tr:not(:first-child) td:first-child").attr("scope","row");
          })
        </script>
      </div>
      <!-- END BASIC TABLE SAMPLE -->
    </div>
  </div>
  <!-- END PAGE CONTENT WRAPPER -->
</div>
