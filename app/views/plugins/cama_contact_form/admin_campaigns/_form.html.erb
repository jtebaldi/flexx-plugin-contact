<%= form_for campaign, url:{action: campaign.new_record? ? :create : :update}, html:{class: 'validate-forms cama_ajax_request'} do |f| %>
    <input id="plugins_contact_form_models_contact_form_site_id" type="hidden" name="plugins_contact_form_models_contact_form[site_id]" value="<%= current_site.id %>" />
    <%= f.hidden_field :id  %>
    <div class="panel-body">
        <div class="form-group">
          <%= f.label t('.name', default: 'Name') %><br>
          <%= f.text_field :name, :class => "form-control required" %>
        </div>
        <h4>Steps</h4>
        <% campaign.campaign_steps.build if campaign.campaign_steps.length == 0 %>
        <%= f.fields_for :campaign_steps do |campaign_step| %>
          <%= render "campaign_step_fields", f: campaign_step %>
        <% end %>
        <%= link_to_add_fields raw("<i class='fa fa-plus'></i> New Step"), f, :campaign_steps %>

        <div class="form-group">
          <%= f.label t('.goal', default: 'Goal') %><br>
          <%= f.select :goal_id, options_for_select(current_site.goals.all.collect{|t| [t.name, t.id]}, f.object.goal_id), :class => "form-control required" %>
        </div>
    </div>

    <div class="panel-footer">
      <button class="btn btn-primary pull-right" type="submit"><%= campaign.new_record? ? t('.submit_btn', default: 'Create Campaign') : t('.submit_btn', default: 'Save Campaign')%></button>
    </div>
<% end %>
